@namespace DComponent
@code {
    [CascadingParameter]
    protected TableStateHandler TableState { get; set; }
    //[Parameter]
    //public TableStateHandler TableState { get; set; }
    [Parameter]
    public string FieldName { get; set; }
    [Parameter]
    public string Caption { get; set; }
    [Parameter]
    public string Width { get; set; } = "200px";
    [Parameter]
    public bool ShowFilter { get; set; } = true;
    [Parameter]
    public string FooterMark { get; set; }
    [Parameter]
    public ColumnStateType FooterStateType { get; set; } = ColumnStateType.C;
    [Parameter]
    public bool IsGroup { get; set; } = false;
    [Parameter]
    public string GroupMark { get; set; }
    [Parameter]
    public string GroupStateFieldName { get; set; }
    [Parameter]
    public ColumnStateType GroupStateType { get; set; } = ColumnStateType.C;
    [Parameter]
    public FieldEditMode EditMode { get; set; }
    protected override void OnInitialized()
    {
        base.OnInitialized();
        var property = TableState.DataProps.First(v => v.Name == FieldName);
        TableState.InitColumn(new Column
        {
            CType = ColumnType.T,
            Property = property,
            CWidth = Width,
            Caption = Caption,
            DataType = property.PropertyType,
            ShowFilter = ShowFilter,
            FooterMark = FooterMark,
            FooterStateType = FooterStateType,
            IsGroup = IsGroup,
            GroupMark = GroupMark,
            GroupStateFieldName = GroupStateFieldName ?? FieldName,
            GroupStateType = GroupStateType,
            EditMode = EditMode
        });
    }
}
