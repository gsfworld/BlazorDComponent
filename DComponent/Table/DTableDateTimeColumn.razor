@namespace DComponent
@code {
    [CascadingParameter]
    protected TableStateHandler TableState { get; set; }
    //[Parameter]
    //public TableStateHandler TableState { get; set; }
    [Parameter]
    public string FieldName { get; set; }
    [Parameter]
    public string Caption { get; set; }
    [Parameter]
    public string Foramt { get; set; } = "yyyy-MM-dd HH:mm:ss";
    [Parameter]
    public string Width { get; set; } = "300px";
    [Parameter]
    public bool IsGroup { get; set; } = false;
    [Parameter]
    public string GroupMark { get; set; }
    [Parameter]
    public string GroupStateFieldName { get; set; }
    [Parameter]
    public FieldEditMode EditMode { get; set; }
    [Parameter]
    public ColumnStateType GroupStateType { get; set; } = ColumnStateType.C;

    protected override void OnInitialized()
    {
        base.OnInitialized();
        TableState.InitColumn(new Column
        {
            CType = ColumnType.D,
            Property = TableState.DataProps.First(v => v.Name == FieldName),
            CWidth = Width,
            CFormate = Foramt,
            Caption = Caption,
            DataType = typeof(DateTime),
            ShowFilter = false,
            IsGroup = IsGroup,
            GroupMark = GroupMark,
            GroupStateFieldName = GroupStateFieldName ?? FieldName,
            GroupStateType = GroupStateType,
            EditMode = EditMode
        });
    }
}
